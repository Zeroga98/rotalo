<div class="filter-container">
  <div class="main">
    <aside class="accordion">
      <div class="filters">
        <div class="title-filter">
          <p class="category bold" *ngIf="params && params['product_name']">{{params['product_name']}}</p>
          <p class="category bold" *ngIf="category">{{category.name}}</p>
          <p class="subcategory bold" *ngIf="category && category.subCategory && category.subCategory.name"> - {{category.subCategory.name}}</p>
        </div>
        <div *ngIf="filter" class="ac-container">
          <div class="option">
            <input id="ac-1" name="accordion-1" type="checkbox" checked />
            <label for="ac-1">Comunidades<div class="icon"></div></label>
            <article class="ac-small">
              <div class="material-design">
                <div>
                  <div class="md-radio">
                    <input (change)="filteByCommunity('')" [checked] = "currentFilter && !currentFilter['seller_community_id']" value="" id="community" type="radio"
                      name="community">
                    <label for="community">Todas ({{communitiesFilter.total}})</label>
                  </div>
                  <div *ngFor="let community of communitiesFilter.comunidades; let i = index" class="md-radio">
                    <input (change)="filteByCommunity(community.id)" value="{{community.id}}" id="community{{i}}"
                      type="radio" name="community">
                    <label for="community{{i}}">{{community.name}} ({{community.quantityForFilter}})</label>
                  </div>
                </div>
              </div>
            </article>
          </div>
          <div class="option">
            <input id="ac-2" name="accordion-1" type="checkbox" checked />
            <label for="ac-2">Quiero<div class="icon"></div></label>
            <article class="ac-small">
              <div class="material-design">
                <div>
                  <div class="md-radio">
                    <input 
                    [checked] = "currentFilter && !currentFilter['product_sell_type']"
                    (change)="filteBySellType('')"  value="" id="sellType" type="radio" name="sellType">
                    <label for="sellType">Todos ({{sellTypesFilter.total}})</label>
                  </div>
                  <div *ngFor="let sellType of sellTypesFilter.tiposVentas; let i = index" class="md-radio">
                    <input (change)="filteBySellType(sellType.name)" value="{{sellType.name.toUpperCase()}}"
                      id="sellType{{i}}" type="radio" name="sellType">
                    <label for="sellType{{i}}">{{sellType.name}} ({{sellType.quantityForFilter}})</label>
                  </div>
                </div>
              </div>
            </article>
          </div>

          <div class="option">
            <input id="ac-3" name="accordion-1" type="checkbox" checked />
            <label for="ac-3">Precio<div class="icon"></div></label>
            <article class="price ac-small">
              <div class="price-row">
                <div class="price-container">
                  <input
                  [(ngModel)]="minPrice"
                  placeholder="Mínimo"
                  onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                  maxlength="10" autocomplete="off" type="text">
                </div>
                <div class="price-container">
                  <input
                  [(ngModel)]="maxPrice"
                  placeholder="Máximo"
                  onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                  maxlength="10" autocomplete="off" type="text">
                </div>
              </div>
              <div>
                <button (click) ="filterByMinMax()" mat-mini-fab><div class="icon"></div></button>
              </div>
            </article>
          </div>
          <div class="option">
            <input id="ac-4" name="accordion-1" type="checkbox" checked />
            <label for="ac-4">Departamento<div class="icon"></div></label>
            <article class="ac-small">
              <div class="material-design">
                <div>
                  <div class="md-radio">
                    <input 
                    [checked] = "currentFilter && !currentFilter['product_state_id']"
                    (change)="filterByState('')"  value="" id="departamento" type="radio"
                      name="departamento">
                    <label for="departamento">Todos ({{stateFilter.total}})</label>
                  </div>
                  <div *ngFor="let departamento of stateFilter.departamentos; let i = index" class="md-radio">
                    <input (change)="filterByState(departamento.id)" value="{{departamento.id}}" id="departamento{{i}}"
                      type="radio" name="departamento">
                    <label for="departamento{{i}}">{{departamento.name}} ({{departamento.quantityForFilter}})</label>
                  </div>
                </div>
              </div>
            </article>
          </div>

          <div class="option">
            <input id="ac-5" name="accordion-1" type="checkbox" checked />
            <label for="ac-5">Ciudad<div class="icon"></div></label>
            <article class="ac-small">
              <div class="material-design">
                <div>
                  <div class="md-radio">
                    <input 
                    [checked] = "currentFilter && !currentFilter['product_city_id']"
                    (change)="filterByCity('')"  value="" id="city" type="radio" name="city">
                    <label for="city">Todos ({{cityFilter.total}})</label>
                  </div>
                  <div *ngFor="let city of cityFilter.ciudades; let i = index" class="md-radio">
                    <input (change)="filterByCity(city.id)" value="{{city.id}}" id="city{{i}}" type="radio" name="city">
                    <label for="city{{i}}">{{city.name}} ({{city.quantityForFilter}})</label>
                  </div>
                </div>
              </div>
            </article>
          </div>
        </div>

        <div class="product-btns">
            <div class="cont-botons">
                <button (click) = "removeFilters()" class="botons" mat-button> Borrar Filtros</button>
            </div>
        </div>


      </div>
     
    </aside>
    <section>
      <div class="container-masonry">
        <div class="list">
          <div class="masonry">
            <div class="grid-item">
              <product #productsEnd *ngFor="let product of products
                  | paginate: { itemsPerPage: 24, currentPage: pageNumber, totalItems: totalPages }"
                class="product-feed"
                [ngClass]="product && product.product_status === 'sell_process' ? 'deactivated-photo' : ''"
                [isProductSelling]="false" [showField]="true" [product]="product"
                (selected)="selectProduct($event);"
                [colourCompany]="product['seller_company_color']  ? product['seller_company_color'] : '#FF3646'"
                id="{{product.product_id}}">
              </product>
            </div>
          </div>
          <pagination-controls *ngIf="showPagination" class="has-text-centered" responsive="true"
            previousLabel="Anterior" nextLabel="Siguiente" (pageChange)="getPage($event)">
          </pagination-controls>
        </div>
      </div>
    </section>
  </div>
</div>
<custom-footer></custom-footer>
