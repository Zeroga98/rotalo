<div class="tittle main-title">
    <h1 class="text">Mis datos</h1>
</div>
<div  *ngIf="!showSpinner">
  <div class="container">
    <div *ngIf="loadImage" class="container-spinner-image">
      <custom-spinner></custom-spinner>
    </div>
    <div id="flashMessage" class="flashMessage">
      <div *ngIf="messageChange && !errorChange" class="alert alert-success text--center" role="success">
        <p>
          <span class="icon-check alert-icon"></span> {{messageChange}}</p>
      </div>
      <div *ngIf="errorChange && !messageChange" class="alert alert-danger" role="alert">
        <ul>
          <li>
            <span>{{errorChange}}</span>
          </li>
        </ul>
      </div>
    </div>

    <div>
        <image-upload
        [max]="1"
        [extensions]="['jpeg','png', 'jpg']"
        [buttonCaption]="'Seleccionar imagen'"
        [dropBoxMessage]="'¡Arrastra tu imagen aquí!'"
        [clearButtonCaption]="'Limpiar'"
        [style]="customStyleImageLoader"
        (uploadFinished)="onUploadImageFinished($event)"
        (removed)="onRemoveImage($event)"></image-upload>
    </div>
    <form class="form-theme" name="editUserForm" role="form" [formGroup]="editProfileForm" (ngSubmit)="onSubmit()">

      <div class="form-group">
        <input formControlName="name" id="txt-name" type="text" class="form-control" maxlength="400" placeholder="Nombre*">
        <span class="help-block">
          <span *ngIf="editProfileForm.get('name').invalid && !editProfileForm.get('name').pristine">
            Este campo es obligatorio.
          </span>
        </span>
      </div>

      <div *ngIf="typeDocument" class="form-group">
        <input value={{typeDocument}} id="txt-typeDocument" type="text" class="form-control" disabled>
      </div>

      <div class="form-group">
        <input  formControlName="idNumber" id="txt-idNumber" type="text" class="form-control" placeholder="Cédula*" maxlength="20"
          onkeypress='return event.charCode >= 48 && event.charCode <= 57'>
      </div>

      <div class="form-group">
        <input formControlName="email" id="txt-email" type="email" class="form-control input__field" placeholder="E-mail*" maxlength="50">
        <span class="help-block">
          <span *ngIf="editProfileForm.get('email').invalid && !editProfileForm.get('email').pristine">
            El campo no cumple con el formato de correo.
          </span>
        </span>
      </div>

      <div class="form-group">
        <input formControlName="cellphone" id="txt-cellphone" name="cellphone" type="number" class="form-control" placeholder="Teléfono celular*"
          onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="15">
          <span class="help-block">
            <span *ngIf="editProfileForm.get('cellphone').invalid && !editProfileForm.get('cellphone').pristine && !editProfileForm.get('cellphone').errors['pattern']">
                Este campo es obligatorio.
            </span>
            <span *ngIf="editProfileForm.get('cellphone').invalid && editProfileForm.get('cellphone').errors['pattern']">
                El campo no cumple con el formato de teléfono celular.
            </span>
          </span>
      </div>

      <div class="form-group location">
        <label class="text--grey-dark">Ubicación</label>
        <div class="form-group">
          <select-country class="white-theme-select" [initialValue]="countryValue" (selected)="country=$event; setValidationId()"></select-country>
        </div>
        <div class="form-group">
          <select-states class="white-theme-select" [initialValue]="stateValue" [country]="country" (selected)="state=$event"></select-states>
        </div>
        <div class="form-group">
          <select-cities class="white-theme-select" [initialValue]="cityValue" [state]="state" (selected)="city=$event"></select-cities>
        </div>
      </div>
      <footer>
        <div class="text--center">
          <custom-button class="btn-max" type="submit" text="Guardar" [disabled]="!isFormValid"></custom-button>
        </div>
      </footer>
    </form>
  </div>
</div>
<custom-spinner *ngIf="showSpinner"></custom-spinner>
