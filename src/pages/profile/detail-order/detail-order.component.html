<div class="detail-order">
  <div class="breadcrumb">
    <div>
      <p *ngIf="!detailOrder" class="loading" [ngClass]="{'animate-loading': !detailOrder}"></p>
      <p *ngIf="isOwnOrder && detailOrder">
        <a [routerLink]="sold">Artículos comprados y vendidos </a> <span>> Detalle de la orden</span>
      </p>
      <p *ngIf="!isOwnOrder  && detailOrder">
        <a [routerLink]="adminOrders">Órdenes tienda</a> <span>> Detalle de la orden</span>
      </p>
    </div>
  </div>
  <div class="container">
    <div [ngClass]="{'animate-loading': !detailOrder}" class="list-orders">
      <div *ngIf="detailOrder">
        <div class="number-order">
          <p><span>Orden #{{detailOrder.referencia}}</span> - {{formatDate(detailOrder.fechaTransaccion)}}</p>
        </div>
        <ul *ngFor="let product of detailOrder.productos" class="order">
          <li *ngIf="product.urlFotoProducto" class="first">
            <div [ngStyle]="{'background-image': getUrlImge(product.urlFotoProducto)}" class="thumb cover"></div>
          </li>
          <div class="order-info">
            <li>
              <p>
                {{product.nombreProducto}}
              </p>
              <p *ngIf="product.talla" class = "refOrden">
                <strong>Talla:</strong> {{product.talla}}
              </p>
              <p *ngIf="product.referencia" class = "refOrden">
               <strong>Ref:</strong> {{product.referencia}}
              </p>
            </li>
            <li>
              <p>
                {{product.precioProducto  | currency:'$' | removeDigits}}
                x {{product.unidades}} unidad<span *ngIf="product.unidades > 1">es</span>
              </p>
            </li>
            <li class="total-product">
              <p>
                <span class="right">Total:</span>
                <span class="right">{{product.totalProducto | currency:'$' | removeDigits}}</span>
              </p>
            </li>

          </div>


        </ul>

        <ul class="order-total">
          <li class="first">
            <div>Subtotal</div>
            <div>IVA</div>
 <div *ngIf="detailOrder.shippingTaxes">Envío</div>
          </li>
          <li>
          </li>
          <li>
          </li>
          <li class="right">
            <div>{{detailOrder.subtotalOrden  | currency:'$' | removeDigits}}</div>
            <div>{{detailOrder.ivaOrden  | currency:'$' | removeDigits}}</div>
<div *ngIf="detailOrder.shippingTaxes">{{detailOrder.shippingTaxes.shippingPrice  | currency:'$' | removeDigits}}</div>
          </li>
          <div class="line"></div>
        </ul>

        <ul class="order-total sum">
          <li class="first">
            <div>TOTAL</div>
          </li>
          <li>
          </li>
          <li>
          </li>
          <li class="right">
            <div class="total-price">{{totalPrice}}</div>
          </li>
        </ul>
      </div>
    </div>
    <div [ngClass]="{'animate-loading': !detailOrder}" class="detail-info">
      <div *ngIf="detailOrder">
        <div  *ngIf="isOwnOrder" class="info-intro">
          <p>
            <span class="strong">¡Genial! Tu pedido está listo </span>para ser enviado, puede llegarte en un plazo
            máximo de 5 días hábiles.
          </p>
        </div>
        <ul>
          <li *ngIf="detailOrder.estado">
            <p>
              <span class="strong">Estado del pedido:</span> {{detailOrder.estado}}
            </p>
          </li>
          <li>
            <p>
              <span *ngIf="detailOrder.medioPago" class="strong">Medio de pago: </span>
              <span *ngIf="detailOrder.medioPago && detailOrder.medioPago =='CARD'">Tarjeta de Crédito</span>
              <span *ngIf="detailOrder.medioPago && detailOrder.medioPago =='NEQUI'">Nequi</span>
            </p>
          </li>
          <li *ngIf="detailOrder.numeroGuia">
            <p>
              <span class="strong">Número de guía:</span> {{detailOrder.numeroGuia}}
            </p>
          </li>
        </ul>
        <div *ngIf="detailOrder.datosEnvio" class="row">
          <div class="title">
            Datos de entrega
          </div>
          <div class="item">
            <div class="img">
              <div class="location"></div>
            </div>
            <div class="item-description">
              <div *ngIf="detailOrder.shippingTaxes">
                <p *ngIf="detailOrder.shippingTaxes.idShippingTaxes == 1">
                  <span>
                    Recoger en Bancolombia Dirección General
                  </span>
                </p>
                <p *ngIf="detailOrder.shippingTaxes.idShippingTaxes == 2">
                  <span>
                    Envío nacional {{detailOrder.shippingTaxes.shippingPrice | currency:"$" | removeDigits}}
                  </span>
                </p>
              </div>
              <div class="flex">
                <p class="address">{{detailOrder.datosEnvio.direccion}}</p>
                <p> <span>{{detailOrder.datosEnvio.ciudad}}</span> -
                  <span>{{detailOrder.datosEnvio.departamento}}</span></p>
              </div>
              <div>
                <p><span>{{detailOrder.datosEnvio.celular}}</span></p>
              </div>
            </div>
          </div>
        </div>
        <div  *ngIf="!isOwnOrder && user" class="row">
          <div class="title">
            Información del comprador
          </div>
          <div class="item">
            <div class="img">
              <div class="user"></div>
            </div>
            <div class="item-description">
              <div>
                <p>{{user.name}}</p>
              </div>
              <div>
                <p *ngIf="user.company"><span>{{user.company.name}}</span> -
                  <span>{{user.company.community.name}}</span></p>
              </div>
              <div>
                <p>{{user.email}}</p>
              </div>
              <div>
                <p>{{user.cellphone}}</p>
              </div>
           <!--   <div>
                <a>Contactar</a>
              </div>-->
            </div>
          </div>
        </div>
      <!--   <div *ngIf="isOwnOrder" class="contact">
          <div class="icon-bank icon-label"></div>
          <a>
            Contactar al vendedor
          </a>
        </div>-->
        <div class="logistic-info">

          <div class="info-label">
            <div class="icon-label icon-watch"></div>
            <div class="text-label">Devoluciones aplican <a [routerLink]="terms">términos y condiciones.</a></div>
          </div>

          <div *ngIf="detailOrder.shippingTaxes && detailOrder.shippingTaxes.idShippingTaxes == 1" class="info-label">
              <div class="icon-label icon-box"></div>
              <div class="text-label">Entrega inmediata</div>
          </div>


          <div *ngIf="detailOrder.shippingTaxes && detailOrder.shippingTaxes.idShippingTaxes == 2" class="info-label">
              <div class="icon-label icon-box"></div>
              <div class="text-label">
                  Entrega hasta 5 días hábiles
              </div>
          </div>

          <div *ngIf="detailOrder.shippingTaxes && detailOrder.shippingTaxes.idShippingTaxes == 2" class="info-label">
              <div class="icon-label icon-shopping-car"></div>
              <div class="text-label">Empresa transportadora: Coordinadora S.A</div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
