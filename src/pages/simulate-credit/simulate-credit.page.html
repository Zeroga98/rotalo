<success-credit *ngIf="showModalCredit"  (closeModal)="closeModal()"></success-credit>
<div class="container-form">
  <div class="title-form">
    <div class="numberCircle">1</div>
    <div class="step-info">
      <h1>Simula tu crédito con Sufi, marca Grupo Bancolombia</h1>
    </div>
  </div>
  <form role="form" [formGroup]="simulateForm" name="registerForm" class="form-theme" (ngSubmit)="onSubmit()">
    <div class="container-step">
      <div class="material-design container-step">
        <div class="info-product">
          <div class="row-section init-section">
            <div class="row">
              <div class="form-group" [ngClass]="{'valid': simulateForm.get('credit-value').valid}">
                <div>
                  <label class="label-title">¿Cuánto cuesta el vehículo que quieres?</label>
                  <input class="form-control input-price" name="credit-value" currencyMask [options]="{prefix: '$' , align: 'left', precision: 0}"
                    onkeypress='return event.charCode >= 48 && event.charCode <= 57' formControlName="credit-value"
                    placeholder="15.000.000" maxlength="18" autocomplete="off">
                  <span class="error-msg" *ngIf="simulateForm.get('credit-value').invalid && !simulateForm.get('credit-value').pristine">
                    <span *ngIf="simulateForm.get('credit-value').errors['required']">
                      Este campo es obligatorio.
                    </span>
                    <span *ngIf="!simulateForm.get('credit-value').errors['required'] && simulateForm.get('credit-value').errors['priceValueMin']">
                      El campo no cumple con el valor mínimo $10,000,000
                    </span>
                    <span *ngIf="simulateForm.get('credit-value').errors['priceValueMax']">
                      El campo no cumple con el valor máximo $5,000,000,000
                    </span>
                  </span>
                </div>
              </div>
              <div class="form-group" [ngClass]="{'valid': simulateForm.get('initial-quota').valid}">
                <div>
                  <label class="label-title">¿Cuánto dinero tienes para la cuota inicial?</label>
                  <input [ngClass]="{'ng-invalid': simulateForm.errors}" currencyMask [options]="{align: 'left', precision: 0, allowNegative: false}"
                    class="form-control input-price" name="initial-quota" onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                    formControlName="initial-quota" placeholder="10.000" maxlength="18" autocomplete="off">
                  <span class="help-block">
                    <span *ngIf="simulateForm.get('initial-quota').invalid && !simulateForm.get('initial-quota').pristine && simulateForm.get('initial-quota').errors['required']">
                      Este campo es obligatorio.
                    </span>
                    <span *ngIf="simulateForm.errors">
                      El campo no cumple con el valor máximo {{simulateForm.get('credit-value').value | currency:"$"}}
                    </span>
                  </span>
                </div>
              </div>
              <div class="form-group" [ngClass]="{'valid': simulateForm.get('term-months').value}">
                <div>
                  <label class="label-title">¿En cuántas cuotas te gustaría pagarlo?</label>
                  <select class="form-control" name="term-months" formControlName="term-months">
                    <option value="" disabled></option>
                    <option value="{{timetoPay}}" *ngFor="let timetoPay of rangeTimetoPayArray">{{timetoPay}}</option>
                  </select>
                  <span class="error-msg">Este campo es requerido</span>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
    <div class="actions-form">
      <custom-button buttonClass="gtmSufiTePrestaSimular primary" [disabled]="formIsInValid || formUntouchedValid" class="button" type="submit"
        text="Recalcular"></custom-button>
    </div>
  </form>
  <div id="table-simulator">
    <div *ngIf="showSimulator">
      <div>
        <div class="title-form">
          <div class="numberCircle">2</div>
          <div class="step-info">
            <h1>Sufi te ofrece las siguientes opciones</h1>
          </div>
        </div>
        <div class="sufi-info">
          <div  [ngClass]="!showThirdPlan ?  'offset-col': ''" class="col">
            <div class="title-plan">
              <div>
                <p>Plan tradicional</p>
                <div class="tooltip">
                  <span class="toolTipText">
                    Paga cuotas fijas <br>  mensuales   <br>  siempre.
                  </span>
                </div>
              </div>
            </div>
            <div class="val">
              <p class="col-cell">
                {{simulatePlan.cuotasPlanUno}} Cuotas mensuales de
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.valorPlanUno | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                Seguro de vida
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.seguroDeVida | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                <strong class="result">Total</strong>
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.totalPlanUno | currency:"$"}}
                </strong>
              </p>
            </div>
            <div>
              <small>*Aplican términos y condiciones</small>
            </div>
          </div>
          <div class="col">
            <div class="title-plan">
              <div>
                <p>Plan cuotas extra</p>
                <div class="tooltip">
                  <span class="toolTipText">
                    Paga cuotas fijas <br>  mensuales y una cuota   <br>  extra cada 6 meses.
                  </span>
                </div>
              </div>
            </div>
            <div class="val">
              <p class="col-cell">
                {{simulatePlan.cuotasPlanDos}} Cuotas mensuales de
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.valorPlanDos | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                Seguro de vida
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.seguroDeVida | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                <strong class="result">Total</strong>
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.totalPlanDos | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                Cuotas semestrales de
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.extraPlanDos | currency:"$"}}
                </strong>
              </p>
            </div>
            <div>
              <small>*Aplican términos y condiciones</small>
            </div>
          </div>
          <div *ngIf="showThirdPlan" class="col">
            <div class="title-plan">
              <div>
                <p>Plan periodo de gracia</p>
                <div class="tooltip">
                  <span class="toolTipText">
                    Pagas intereses por 1 <br>  año y cuota completas   <br>  desde el mes 13.
                  </span>
                </div>
              </div>
            </div>
            <div class="val">
              <p class="col-cell">
                {{simulatePlan.cuotasPlanTres}} Cuotas mensuales de
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.valorPlanTres | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                Seguro de vida
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.seguroDeVida | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                <strong class="result">Total</strong>
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.subTotalPlanTres | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                {{simulatePlan.cuotasExtraPlanTres}} cuotas a partir del mes 13
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.extraPlanTres | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                Seguro de vida
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.seguroDeVida | currency:"$"}}
                </strong>
              </p>
            </div>
            <div class="val">
              <p class="col-cell">
                <strong class="result">Total</strong>
              </p>
              <p class="col-cell text-right">
                <strong>
                  {{simulatePlan.totalPlanTres | currency:"$"}}
                </strong>
              </p>
            </div>
            <div>
              <small>*Aplican términos y condiciones</small>
            </div>
          </div>
        </div>
      </div>
      <div class="contact-step">
        <div class="title-form">
          <div class="numberCircle">3</div>
          <div class="step-info">
            <h1>¿Te gustó?</h1>
            <p>
              Completa esta información para ponernos en contacto contigo.
            </p>
            <p class="msg-field-required">
              *Campos obligatorios
            </p>
          </div>
        </div>
        <form role="form" class="form-theme" [formGroup]="contactUser" name="contactForm" (ngSubmit)="creditRequest()">
          <div class="container-step">
            <div class="material-design container-step">
              <div class="info-product">
                <div class="row-section row-margin">
                  <div class="row">
                    <div class="form-group group-line">
                      <div>
                        <div class="label-title-form">Nombre</div>
                        <div class="row-form">
                          <div class="row-value">{{nameUser}}</div>
                          <div class="icon-checked">
                            <span class="circle-check"></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group group-line">
                      <div>
                        <div class="label-title-form">Tipo de documento</div>
                        <div class="row-form">
                          <div class="row-value">{{typeDocument}}</div>
                          <div class="icon-checked">
                            <span class="circle-check"></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group group-line">
                      <div>
                        <div class="label-title-form">Número de doc.</div>
                        <div class="row-form">
                          <div class="row-value">{{documentNumber}}</div>
                          <div class="icon-checked">
                            <span class="circle-check"></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group group-line">
                      <div>
                        <div class="label-title-form">Correo electrónico</div>
                        <div class="row-form">
                          <div class="row-value">
                            <p>
                                {{email}}
                            </p>
                          </div>
                          <div class="icon-checked">
                            <span class="circle-check"></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group group-line">
                      <div>
                        <div class="label-title-form">Departamento</div>
                        <div class="row-form">
                          <div class="row-value">{{stateName}}</div>
                          <div class="icon-checked">
                            <span class="circle-check"></span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group group-line">
                      <div>
                        <div class="label-title-form">Ciudad</div>
                        <div class="row-form">
                          <div class="row-value">{{cityName}}</div>
                          <div class="icon-checked">
                            <span class="circle-check"></span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="form-group">
                      <div class="cellphone-container">
                        <label class="label-title label-title-red">Celular*</label>
                        <input
                        formControlName="phone-user"
                        name="phone-user"
                        class="form-control input-price" onkeypress='return event.charCode >= 48 && event.charCode <= 57'
                        maxlength="10" autocomplete="off">
                        <label class="add-digits">+57</label>
                        <span class="error-msg">Este campo es requerido</span>
                      </div>
                    </div>
                    <div class="form-group">
                      <div>
                        <label class="label-title label-title-red">Ingresos mensuales</label>
                        <input
                        formControlName="salary"
                        name="salary"
                        class="form-control input-price" name="salary" currencyMask [options]="{prefix: '$' , align: 'left', precision: 0, allowNegative: false}"
                        onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="12" autocomplete="off">
                        <span class="error-msg">Este campo es requerido</span>
                      </div>
                    </div>
                    <div class="form-group" [ngClass]="{'valid': contactUser.get('hour-contact').value}">
                      <div>
                        <label class="label-title label-title-red">¿En qué horario quieres que te llamemos?</label>
                        <select class="form-control" name="hour-contact" formControlName="hour-contact">
                          <option value="" disabled></option>
                          <option value="Mañana">Mañana</option>
                          <option value="Tarde">Tarde</option>
                          <option value="Noche">Noche</option>
                        </select>
                        <span class="error-msg">Este campo es requerido</span>
                      </div>
                    </div>
                  </div>
                  <div>
                    <div class="check-offer">
                      <label for="checkTerms" class="material-checkbox container-check">
                        <input type="checkbox" id="checkTerms" name="check-authorization" formControlName="check-authorization" checked>
                        <span class="checkmark"></span>
                      </label>
                      <span class="check-label">Autorización para consultar, reportar y compartir información.</span>
                      <div>
                        <span
                        [ngStyle]="{'display': contactUser.get('check-authorization').invalid && contactUser.get('check-authorization').touched ? 'block' : 'none' }"
                        class="error-msg">Este campo es requerido</span>
                      </div>
                    </div>
                  </div>
                  <div class="terms">
                    <accordion class="desktop accordion" [questions]='infoAccept'></accordion>
                    <accordion class="mobile accordion" [questions]='infoAcceptMobile'></accordion>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="actions-form">
              <custom-button buttonClass="gtmSufiTePrestaEnvSolic primary"  class="button" type="submit"
                text="Enviar"></custom-button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<custom-footer></custom-footer>
