<div class="container-product" *ngIf="product" #containerProducts>
  <a onclick="return false;" [href]="getUrlProduct(product)">
    <div [ngClass]="isProductChecked || isProductSelling || isProductSold? 'opacity-container' : ''" class="container-photo">
      <div>
        <div (click)="selectProduct($event)" [ngClass]="isPromoDate && idCountry != 9? 'container-black-friday' : ''" *ngIf="!isProductChecked&&(product['product_is_low_price'] || isPromoDate && isActivePromo)"
          class="container-low-price">
          <p *ngIf="!isPromoDate && idCountry == 1 || idCountry == 9">$ REBAJÓ</p>
        </div>
        <div *ngIf="isProductSelling&&!isProductChecked" class="options-container">
          <div *ngIf="expiredProduct" class="republish" (click)="republish(product)"></div>
          <div class="delete" (click)="openModalDeleteProduct()"></div>
          <div class="edit" (click)="editProduct(product)"></div>
        </div>

        <div *ngIf="isProductSold && !isProductChecked" class="options-container">
          <div class="republish" (click)="republishSold(product)"></div>
        </div>

        <div *ngIf="isProductChecked" class="options-container">
          <div class="delete" (click)="removeMarkProduct(product)"></div>
        </div>

        <img (click)="selectProduct($event)" (load)="triggerMasonryLayout()" *ngIf="!product.product_photo_url" [src]="defaultImage"
          [alt]="product['product_name']" (error)="updateSrc($event)">
        <img (click)="selectProduct($event)" (load)="triggerMasonryLayout()" *ngIf="product['product_photo_url']" [src]="product['product_photo_url']"
          [alt]="product['product_name']" (error)="updateSrc($event)">
      </div>
      <div *ngIf="!isProductSold && isSuperUser() && !isProductChecked && !isProductSelling && !isProductPurchased" (click)="checkStar()" class="options-container">
        <div [ngClass]="starSelected ? 'active' : ''" class="star"></div>
      </div>
      <div *ngIf="isSuperUser() && isProductChecked && product['product_status'] != 'active'" class="status-mark">
        <p>{{status}}</p>
      </div>
    </div>
    <div class="container-name">
      <div (click)="shareProduct('custom-modal-2')" *ngIf="!isProductSelling &&!isProductPurchased  && !isProductSold &&!isProductChecked"
        class="gtmCompartirProducto icon-share-container">
        <div class="gtmCompartirProducto icon-share">
        </div>
      </div>
      <span (click)="selectProduct($event)" class="name">{{product['product_name']}}</span>
    </div>
      <div class="product-info" (click)="selectProduct($event)">
        <div [ngClass]="showField ? '' : 'border-price'" class="container-price">
          <div class="price-container">
            <div>
              <span *ngIf="product['product_price'] != 0 && product['product_currency'] == 'GTQ'" class="name">{{product['product_price']
                | currency:"Q" | removeDigits}}</span>
              <span *ngIf="product['product_price'] != 0 && product['product_currency'] != 'GTQ' && idCountry == 9"
                class="name">{{product['product_price']
                | currency:"$" | removeDigits}}</span>
              <span *ngIf="product['product_price'] != 0 && product['product_currency'] != 'GTQ' && idCountry == 1"
                class="name">{{product['product_price']
                | currency:"$" | removeDigits}}</span>
              <span *ngIf="product['product_price'] == 0" class="name">Gratis</span>
            </div>
            <div [ngClass]="product['product_previous_price'] && product['product_previous_price'] >  product['product_price'] || isActivePromo? 'low-price' : ''"
              *ngIf="product['product_previous_price'] && isPromoDateBefore && isActivePromo || product['product_previous_price'] && product['product_previous_price'] >  product['product_price']">
              <span *ngIf="product['product_previous_price'] != 0 && product['product_currency'] == 'GTQ'" class="name">{{product['product_previous_price']
                | currency:"Q" | removeDigits}}</span>
              <span *ngIf="product['product_previous_price'] != 0 && product['product_currency'] != 'GTQ' && idCountry == 9"
                class="name">{{product['product_previous_price'] | currency:"$" | removeDigits}}</span>
              <span *ngIf="product['product_previous_price'] != 0 && product['product_currency'] != 'GTQ' && idCountry == 1"
                class="name">{{product['product_previous_price'] | currency:"$" | removeDigits}}</span>
            </div>
            <div [ngClass]="product['previousPrice'] && product['previousPrice'] >  product['product_price'] || isActivePromo? 'low-price' : ''"
              *ngIf="product['previousPrice'] && isPromoDateBefore && isActivePromo || product['previousPrice'] && product['previousPrice'] >  product['product_price']">
              <span *ngIf="product['previousPrice'] != 0 && product['product_currency'] == 'GTQ'" class="name">{{product['previousPrice']
                | currency:"Q" | removeDigits}}</span>
              <span *ngIf="product['previousPrice'] != 0 && product['product_currency'] != 'GTQ' && idCountry == 9"
                class="name">{{product['previousPrice']
                | currency:"$" | removeDigits}}</span>
              <span *ngIf="product['previousPrice'] != 0 && product['product_currency'] != 'GTQ' && idCountry == 1"
                class="name">{{product['previousPrice']
                | currency:"$" | removeDigits}}</span>
            </div>
          </div>
          <div *ngIf="isProductSold && product.calification > 0" class="gold-ranking">
            <show-star [numberStar]="product.calification" class="price"> </show-star>
          </div>
        </div>

        <div *ngIf="product['product_sell_type'] && showField && !isProductChecked" class="container-status">
          <span class="icon-margin">$</span>
          <span class="name">{{product['product_sell_type'].toLowerCase()}}</span>
        </div>
        <div *ngIf="!isProductChecked" class="container-status">
          <span class="icon icon-tag icon-margin"></span>
          <span class="name">{{product['product_used'] ? 'Usado' : 'Nuevo'}}</span>
        </div>
        <div *ngIf="showField && !isProductChecked" class="container-location">
          <span class="icon-location"></span>
          <span>{{getLocation(product)}}</span>
        </div>
        <div *ngIf="!showField && !isProductChecked" class="container-date">
          <span class="icon-calendar"></span>
          <p>
            <span>Fecha de Publicación</span>
            {{product['product_published_at'] | date}}</p>
        </div>
        <div *ngIf="isProductSelling && !isProductChecked" class="container-date">
          <span class="icon-calendar"></span>
          <p>
            <span>Fecha de Caducidad</span>
            {{product['product_publish_until'] | date}}</p>
        </div>
        <div *ngIf="isProductSold && !isProductChecked" class="container-date">
          <span class="icon-calendar"></span>
          <p>
            <span>Fecha de venta</span>
            {{product['transaction_date'] | date}}</p>
        </div>
        <div *ngIf="isProductPurchased && !isProductChecked" class="container-date">
          <span class="icon-calendar"></span>
          <p>
            <span>Fecha de compra</span>
            {{product['transaction_date'] | date}}</p>
        </div>

        <div *ngIf="isProductSold && product['buyer_name'] && !isProductChecked" class="container-date">
          <span class="icon-account"></span>
          <p>
            <span>Comprador</span>
            {{product['buyer_name']}}
        </div>

        <div *ngIf="product['seller_name'] && isProductPurchased && !isProductChecked" class="container-date">
          <span class="icon-account"></span>
          <p>
            <span>Vendedor</span>
            {{product['seller_name']}}
        </div>
      </div>
      <div (click)="selectProduct($event)" *ngIf="showField && !isProductChecked" class="container-info-user">
        <div class="icon-container" [ngStyle]="{'background-color':colourCompany}">
          <span class="icon-account" *ngIf="!product['seller_photo_url']"></span>
          <img *ngIf="product['seller_photo_url']" [src]="product['seller_photo_url']">
        </div>
        <div class="user-info-container">
          <p class="name-text">{{product['seller_name']}}</p>
          <p *ngIf="product['seller_company_name']" class="company-text" [ngStyle]="{'color':colourCompany}">
            {{product['seller_company_name']}}
            <span class="comunidad-text"> - {{product['seller_community_name']}}</span>
          </p>
        </div>
      </div>

    <div *ngIf="isProductSelling && !expiredProduct && !isProductChecked" class="form-theme rotando media">
      <div class="form-group  media-left media-middle">
        <input [checked]="productStatus" (change)="openModalInactiveProduct()"  type="checkbox"  name="switch" class="gtmCentrRotArtRotanInactivar switch-input">
        <label class="switch-label" (click)="openModalInactiveProduct()"></label>
      </div>
      <div class="media-body">
        <p class="panel-product__info post-status {{productChecked}}">Tu artículo está {{ productStatus ? 'activo' :
          'inactivo' }}</p>
      </div>
    </div>
  </a>
  <form *ngIf="isProductChecked" class="form-theme">
    <div class="form-group field-form valid">
      <span class="text-title">
        Orden:
      </span>
      <select (change)='changeCheckProduct($event)' name="orderSelect" [(ngModel)]="numberOrder" class="form-control">
        <option value="" selected="true" disabled></option>
        <option *ngFor="let number of numbersOrder" value="{{number}}">{{number}}</option>
      </select>
    </div>
  </form>
</div>
