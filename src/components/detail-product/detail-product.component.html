<offer-modal *ngIf="isOfferModalShowed" [config]="configModal" (close)="isOfferModalShowed = false"></offer-modal>
<custom-spinner *ngIf="!products"></custom-spinner>
<div *ngIf="products" class="container">
  <div class="product">
    <div class="visits capitalize">{{products['sell-type'].toLowerCase()}}
      ({{visitsNumber}} visitas)
    </div>
    <div *ngIf="!products?.photos" class="product-photos">
      <div *ngIf="isSellProcess()" class="lable-sell-process">
        <div class="icon-clock label-sell--center"></div>
        <label class="label-sell--center">Venta en proceso</label>
      </div>
      <div class="panel-heading">
        <div class="container-product__image">
          <img src="/assets/img/product-no-image.png">
        </div>
      </div>
    </div>
    <div *ngIf="products?.photos" class="product-photos">
      <div *ngIf="isSellProcess()" class="lable-sell-process">
        <div class="icon-clock label-sell--center"></div>
        <label class="label-sell--center">Venta en proceso</label>
      </div>
      <div [ngClass]="isSellProcess() ? 'deactivated-photo' : ''" class="panel-heading">
        <ngx-carousel [inputs]="carouselConfig">
          <ngx-item NgxCarouselItem *ngFor="let productImage of productsPhotos">
            <div class="container-product__image">
              <img src="{{productImage?.url}}">
            </div>
          </ngx-item>
          <span (click)="clickArrow()" NgxCarouselPrev class="gtmFlechasProductos carousel-arrow carousel-arrow__prev">
            <span class="icon icon-chevron-thin-left"></span>
          </span>
          <span (click)="clickArrow()" NgxCarouselNext class="gtmFlechasProductos carousel-arrow carousel-arrow__next">
            <span class="icon icon-chevron-thin-right"></span>
          </span>
        </ngx-carousel>
      </div>
    </div>
    <div *ngIf="products" class="product-info">
      <div class="title-product">{{products.name}}</div>
      <div class="flexbox">
        <div *ngIf="products.model" class="contTipo">
          Modelo - {{products.model}}
        </div>
        <div>
          <span class="space" *ngIf="products.model">-</span>
          <span class="condition">Condición: </span>
          <span>{{products.used ? 'Usado' : 'Nuevo'}}</span>
        </div>
      </div>
      <div class="description">{{products.description}}</div>
      <div *ngIf="products.subcategory" class="contTipo">
        {{products.subcategory.category.name}} - {{products.subcategory.name}}
      </div>
      <div class="btns-container">
          <div class="btn-item">
              <div class="valor-product">{{products.price | currency:"$":0 | removeDigits }} {{ products.currency }}</div>
          </div>
          <div  *ngIf="products && !checkSufiBotton() && !isSellProcess() && !validateSession()" class="btn-item">
              <button class="gtmProdComprar botons" *ngIf="products && products['sell-type'] !== 'SUBASTA'" (click)="buyProduct(products.id)">
                  <span class="icon-shop_car"></span> {{ products['sell-type'] === 'GRATIS' ? 'Yo lo quiero' : 'Comprar' }}
               </button>
               <button class="gtmProdHacerOferta botons" *ngIf="products && products['sell-type'] == 'SUBASTA'" (click)="openOfferModal(products)">
                  <span class="icon-offer"></span> Hacer oferta
              </button>
          </div>
          <div class="btn-two-container" *ngIf="products && checkSufiBotton() && !isSellProcess() && !validateSession()" >
              <div class="btn-item">
                  <button class="gtmProdSufiTePresta botons" *ngIf="products && products['sell-type'] !== 'SUBASTA'" (click)="openSimulateCreditSufi(products.id)">
                      <span class="icon-custom icon-custom--sufi-logo"></span>Solicitar Crédito
                  </button>
              </div>
              <div class="btn-item">
                  <button class="gtmProdComprar botons" *ngIf="products && products['sell-type'] !== 'SUBASTA'" (click)="buyProduct(products.id)">
                      <span class="icon-shop_car"></span> {{ products['sell-type'] === 'GRATIS' ? 'Yo lo quiero' : 'Comprar' }}
                   </button>
              </div>
          </div>
          <div class="btn-two-container" *ngIf="products && validateSession() && !isSold()" >
              <div class="btn-item">
                  <button class="botons" (click)="deleteProduct(products)">
                      <span class="icon icon-trash"></span>Eliminar
                  </button>
              </div>
              <div class="btn-item">
                  <button class="botons" (click)="editProduct(products)">
                      <span class="icon icon-edit"></span> Editar
                   </button>
              </div>
          </div>
      </div>
    </div>
  </div>
</div>
