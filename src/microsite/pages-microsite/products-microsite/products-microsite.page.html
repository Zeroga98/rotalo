<div class="md-overlay"></div>
<div class="md-overlay-red"></div>

<modal-shareProduct class="md-modal-center md-effect-1" id="custom-modal-2"></modal-shareProduct>
<!-- <modal-ticket [coupon] = "couponService" class="md-modal-center md-effect-1 md-modal-coupon" id="custom-modal-3"></modal-ticket> -->
<banner-latienda></banner-latienda>

<div class="emotional-banner"></div>
<div class="walcome-messaje">
  <p>Artículos exclusivos Bancolombia</p>
</div>
<div class="background-feed">
  <div class="container-spinner" *ngIf="isSpinnerShow">
    <custom-spinner></custom-spinner>
  </div>
  <div class="msg-no-products" *ngIf="showAnyProductsMessage">
    ¡Aún no tenemos productos en esta categoría! Por favor busca nuevamente.
  </div>

  <div class="filter-container">
    <div class="main">
      <aside class="accordion">
        <div class="filters">
          <div *ngIf="filter" class="ac-container">
            <div *ngIf="filter.filtroComunidad" class="option">
              <input checked id="ac-1" name="accordion-1" type="checkbox" />
              <label for="ac-1">Comunidades<div class="icon"></div></label>
              <article class="ac-small">
                <div class="material-design">
                  <div>
                    <div class="md-radio">
                      <input (change)="filteByCommunity('')"
                        [checked]="currentFilter && !currentFilter['seller_community_id']" value="" id="community"
                        type="radio" name="community">
                      <label for="community">Todas ({{filter.filtroComunidad.total}})</label>
                    </div>
                    <div *ngFor="let community of filter.filtroComunidad.comunidades; let i = index" class="md-radio">
                        <input
                        [checked]="currentFilter && currentFilter['seller_community_id'] == community.id"
                        (change)="filteByCommunity(community.id)" value="{{community.id}}" id="community{{i}}"
                          type="radio" name="community">
                        <label for="community{{i}}">{{community.name}} ({{community.quantityForFilter}})</label>
                      </div>
                  </div>
                </div>
              </article>
            </div>
            <div *ngIf="filter.filtroTipoVenta" class="option">
              <input checked id="ac-2" name="accordion-1" type="checkbox" />
              <label for="ac-2">Quiero<div class="icon"></div></label>
              <article class="ac-small">
                <div class="material-design">
                  <div>
                    <div class="md-radio">
                      <input [checked]="currentFilter && !currentFilter['product_sell_type']"
                        (change)="filteBySellType('')" value="" id="sellType" type="radio" name="sellType">
                      <label for="sellType">Todos ({{filter.filtroTipoVenta.total}})</label>
                    </div>

                    <div *ngFor="let sellType of filter.filtroTipoVenta.tiposVentas; let i = index" class="md-radio">
                      <input
                      [checked]="currentFilter && currentFilter['product_sell_type'] == sellType.name.toUpperCase()"
                      (change)="filteBySellType(sellType.name)" value="{{sellType.name.toUpperCase()}}"
                        id="sellType{{i}}" type="radio" name="sellType">
                      <label for="sellType{{i}}">{{sellType.name}} ({{sellType.quantityForFilter}})</label>
                    </div>
                  </div>
                </div>
              </article>
            </div>
            <div class="option">
              <input checked id="ac-3" name="accordion-1" type="checkbox" />
              <label for="ac-3">Precio<div class="icon"></div></label>
              <article class="price ac-small">
                <div class="price-row">
                  <div class="price-container">
                    <input [(ngModel)]="minPrice" placeholder="Mínimo"
                      onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="10" autocomplete="off"
                      type="text">
                  </div>
                  <div class="price-container">
                    <input [(ngModel)]="maxPrice" placeholder="Máximo"
                      onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="10" autocomplete="off"
                      type="text">
                  </div>
                </div>
                <div>
                  <button (click)="filterByMinMax()" mat-mini-fab>
                    <div class="icon-blue"></div>
                  </button>
                </div>
              </article>
            </div>
          </div>
          <div *ngIf="filter" class="product-btns">
            <div class="cont-botons">
              <button (click)="removeFilters()" class="botons" mat-button> Borrar filtros</button>
            </div>
          </div>
        </div>
      </aside>
      <section>
        <div class="container-masonry">
          <div class="list">
            <div class="masonry">
              <div class="grid-item" *ngIf="products.length > 0">
                <product-microsite #productsFinish *ngFor="let product of products | paginate: { itemsPerPage: 24, currentPage: pageNumber, totalItems: totalPages }"
                class="product-feed" [ngClass]="product && product.status === 'sell_process' ? 'deactivated-photo' : ''"
                [isProductSelling]="false" [showField]="true" [product]="product" (selected)="selectProduct($event); setScroll($event)"
                [colourCompany]="product.user&&product.user.company ? product.user.company.colour : '#FF3646'" id="{{product.id}}">
              </product-microsite>
              </div>

              <div class="message-container" *ngIf="products.length === 0">
                <div class="icon-information"></div>
                <div class="description">
                  <p>¡Rayos! No encontramos resultados.</p>
                </div>
                <div class="sub-description">
                  <p>Prueba con otros filtros.</p>
                </div>
              </div>
            </div>
            <pagination-controls *ngIf="showPagination && products.length > 0" class="has-text-centered" responsive="true"
              previousLabel="Anterior" nextLabel="Siguiente" (pageChange)="getPage($event)">
            </pagination-controls>
          </div>
        </div>
      </section>

    </div>
  </div>

</div>
<custom-footer></custom-footer>
